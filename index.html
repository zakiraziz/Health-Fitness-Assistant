<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthAI - Your Personal Health & Fitness Assistant</title>
    <meta name="description" content="HealthAI - AI-powered health and fitness assistant. Get personalized workout plans, nutrition advice, and health monitoring.">
    <meta name="keywords" content="health, fitness, AI assistant, workout, nutrition, exercise">
    <meta name="author" content="HealthAI">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <style>
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #6C63FF, #4A47B9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Clerk specific styles */
        .clerk-auth-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .clerk-user-menu {
            display: none;
            position: relative;
        }
        
        .clerk-user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6C63FF, #4A47B9);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid white;
            transition: transform 0.2s;
        }
        
        .clerk-user-avatar:hover {
            transform: scale(1.05);
        }
        
        .clerk-user-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            min-width: 200px;
            display: none;
            z-index: 1000;
            overflow: hidden;
        }
        
        .clerk-user-dropdown.active {
            display: block;
            animation: fadeIn 0.2s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .clerk-user-dropdown a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            color: #333;
            text-decoration: none;
            transition: background 0.2s;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .clerk-user-dropdown a:last-child {
            border-bottom: none;
        }
        
        .clerk-user-dropdown a:hover {
            background: #f8f9fa;
        }
        
        .clerk-user-dropdown .user-info {
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
        }
        
        .clerk-user-dropdown hr {
            margin: 0;
            border: none;
            border-top: 1px solid #eee;
        }
        
        /* Toast notifications */
        .toast-message {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            color: #333;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            z-index: 10000;
            animation: slideIn 0.3s ease;
            max-width: 350px;
        }
        
        .toast-message.toast-success {
            border-left: 4px solid #10B981;
        }
        
        .toast-message.toast-error {
            border-left: 4px solid #EF4444;
        }
        
        .toast-message.toast-info {
            border-left: 4px solid #3B82F6;
        }
        
        .toast-message button {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 18px;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }
        
        .toast-message button:hover {
            background: rgba(0,0,0,0.1);
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .clerk-auth-buttons {
                gap: 5px;
            }
            
            .clerk-user-dropdown {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                margin: 0 10px;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
    </div>

    <!-- Header -->
    <header role="banner">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="Main navigation">
                <div class="logo">
                    <i class="fas fa-brain" aria-hidden="true"></i>
                    <span>HealthAI</span>
                </div>
                <div class="nav-links">
                    <a href="index.html" class="active" aria-current="page">Home</a>
                    <a href="chat.html">AI Assistant</a>
                    <a href="workouts.html">Workouts</a>
                    <a href="nutrition.html">Nutrition</a>
                    <a href="profile.html">Profile</a>
                </div>
                
                <!-- Clerk Authentication Buttons -->
                <div id="authButtons" class="clerk-auth-buttons">
                    <button class="btn btn-outline" id="loginBtn" aria-label="Login to HealthAI">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                    <button class="btn btn-primary" id="signupBtn" aria-label="Sign up for HealthAI">
                        <i class="fas fa-user-plus"></i> Sign Up
                    </button>
                </div>
                
                <!-- Clerk User Menu -->
                <div id="userMenu" class="clerk-user-menu">
                    <div class="clerk-user-avatar" id="userAvatar" aria-label="User menu" aria-expanded="false">
                        U
                    </div>
                    <div class="clerk-user-dropdown" id="userDropdown" role="menu">
                        <div class="user-info">
                            <strong id="userName">User</strong>
                            <div class="user-email" id="userEmail" style="font-size: 12px; color: #666; margin-top: 5px;">Loading...</div>
                        </div>
                        <a href="dashboard.html" role="menuitem"><i class="fas fa-tachometer-alt" aria-hidden="true"></i> Dashboard</a>
                        <a href="profile.html" role="menuitem"><i class="fas fa-user" aria-hidden="true"></i> My Profile</a>
                        <a href="progress.html" role="menuitem"><i class="fas fa-chart-line" aria-hidden="true"></i> Progress</a>
                        <a href="settings.html" role="menuitem"><i class="fas fa-cog" aria-hidden="true"></i> Settings</a>
                        <hr>
                        <a href="#" id="logoutBtn" role="menuitem" style="color: #EF4444;">
                            <i class="fas fa-sign-out-alt" aria-hidden="true"></i> Logout
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" role="region" aria-labelledby="hero-title">
        <div class="container">
            <div class="hero-content">
                <h1 id="hero-title">Your Personal AI Health & Fitness Assistant</h1>
                <p>Get personalized workout plans, nutrition advice, and health insights powered by artificial intelligence.</p>
                <div class="hero-buttons">
                    <a href="chat.html" class="btn btn-primary">Ask HealthAI</a>
                    <a href="workouts.html" class="btn btn-outline">View Workouts</a>
                </div>
            </div>
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Person exercising with fitness equipment" loading="lazy">
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" role="region" aria-labelledby="features-title">
        <div class="container">
            <h2 id="features-title" class="section-title">How HealthAI Can Help You</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-dumbbell" aria-hidden="true"></i>
                    </div>
                    <h3>Personalized Workouts</h3>
                    <p>Get workout plans tailored to your fitness level, goals, and available equipment.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-apple-alt" aria-hidden="true"></i>
                    </div>
                    <h3>Nutrition Guidance</h3>
                    <p>Receive meal plans and nutrition advice based on your dietary preferences and health goals.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-stethoscope" aria-hidden="true"></i>
                    </div>
                    <h3>Health Monitoring</h3>
                    <p>Track your progress and get insights about your health metrics and improvements.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-robot" aria-hidden="true"></i>
                    </div>
                    <h3>AI-Powered Assistant</h3>
                    <p>Ask any health-related questions and get instant, reliable answers from our AI.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials" role="region" aria-labelledby="testimonials-title">
        <div class="container">
            <h2 id="testimonials-title" class="section-title">What Our Users Say</h2>
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"HealthAI helped me lose 15 pounds in 3 months with personalized workout and nutrition plans!"</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="Sarah Johnson" loading="lazy">
                        <div>
                            <h4>Sarah Johnson</h4>
                            <span>Fitness Enthusiast</span>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>"The AI assistant answered all my health questions accurately. It's like having a personal trainer and nutritionist!"</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="Mike Thompson" loading="lazy">
                        <div>
                            <h4>Mike Thompson</h4>
                            <span>Busy Professional</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="logo">
                        <i class="fas fa-brain" aria-hidden="true"></i>
                        <span>HealthAI</span>
                    </div>
                    <p>Your personal AI health and fitness assistant for a healthier lifestyle.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="chat.html">AI Assistant</a></li>
                        <li><a href="workouts.html">Workouts</a></li>
                        <li><a href="nutrition.html">Nutrition</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact Us</h4>
                    <ul>
                        <li><i class="fas fa-envelope" aria-hidden="true"></i> support@healthai.com</li>
                        <li><i class="fas fa-phone" aria-hidden="true"></i> +1 (555) 123-4567</li>
                        <li><i class="fas fa-map-marker-alt" aria-hidden="true"></i> 123 Fitness St, Health City</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 HealthAI. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Load Clerk SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"></script>

    <!-- Main Script -->
    <script>
        // Remove loading screen when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                setTimeout(() => {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.remove();
                    }, 500);
                }, 500);
            }
            
            // Initialize application
            initApp();
        });

        // Fallback if DOMContentLoaded doesn't fire
        setTimeout(() => {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.remove();
                }, 500);
            }
        }, 3000);

        // Main application initialization
        async function initApp() {
            try {
                // Initialize Clerk
                await initClerk();
                
                // Initialize navigation
                initNavigation();
                
                // Initialize smooth scrolling
                initSmoothScrolling();
                
                console.log('HealthAI application initialized successfully');
            } catch (error) {
                console.error('Failed to initialize application:', error);
                showToast('Application initialization failed. Please refresh the page.', 'error');
            }
        }

        // Clerk initialization
        async function initClerk() {
            // IMPORTANT: Replace this with your actual Clerk publishable key
            // You can find it in your Clerk dashboard: https://dashboard.clerk.com
            const CLERK_PUBLISHABLE_KEY = 'pk_test_your-actual-key-here';
            
            if (!CLERK_PUBLISHABLE_KEY || CLERK_PUBLISHABLE_KEY.includes('your-actual-key')) {
                console.warn('Clerk publishable key not configured. Using demo mode.');
                initDemoAuth();
                return;
            }

            try {
                // Initialize Clerk
                window.clerk = await window.Clerk.load({
                    publishableKey: CLERK_PUBLISHABLE_KEY,
                    options: {
                        appearance: {
                            variables: {
                                colorPrimary: '#6C63FF',
                                colorText: '#333333',
                                colorBackground: '#ffffff',
                                fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'
                            }
                        },
                        signIn: {
                            afterSignInUrl: '/dashboard.html',
                            redirectUrl: '/dashboard.html'
                        },
                        signUp: {
                            afterSignUpUrl: '/dashboard.html',
                            redirectUrl: '/dashboard.html'
                        }
                    }
                });

                // Update UI based on auth state
                updateAuthUI();
                
                // Listen for auth changes
                window.clerk.addListener(({ user }) => {
                    updateAuthUI();
                    
                    if (user) {
                        console.log('User signed in:', user.fullName || user.emailAddresses[0]?.emailAddress);
                        showToast(`Welcome ${user.firstName || 'back'}!`, 'success');
                    } else {
                        console.log('User signed out');
                        showToast('You have been signed out', 'info');
                    }
                });

                // Setup event listeners
                setupAuthEventListeners();
                
                console.log('Clerk initialized successfully');
                
            } catch (error) {
                console.error('Failed to initialize Clerk:', error);
                showToast('Authentication service is temporarily unavailable. Using demo mode.', 'error');
                initDemoAuth();
            }
        }

        // Update authentication UI
        function updateAuthUI() {
            const authButtons = document.getElementById('authButtons');
            const userMenu = document.getElementById('userMenu');
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            const userEmail = document.getElementById('userEmail');
            const userDropdown = document.getElementById('userDropdown');

            // Check if Clerk is available and user is authenticated
            if (window.clerk && window.clerk.user) {
                // User is signed in
                authButtons.style.display = 'none';
                userMenu.style.display = 'block';
                
                const user = window.clerk.user;
                const fullName = [user.firstName, user.lastName].filter(Boolean).join(' ');
                const email = user.emailAddresses[0]?.emailAddress || user.primaryEmailAddress?.emailAddress || '';
                
                if (userName) {
                    userName.textContent = fullName || 'User';
                }
                
                if (userEmail) {
                    userEmail.textContent = email;
                }
                
                if (userAvatar) {
                    // Create initials for avatar
                    let initials = '';
                    if (user.firstName) initials += user.firstName.charAt(0);
                    if (user.lastName) initials += user.lastName.charAt(0);
                    initials = initials.toUpperCase() || 'U';
                    
                    userAvatar.textContent = initials;
                    userAvatar.setAttribute('aria-label', `${fullName || 'User'} menu`);
                }
                
                // Protect pages that require authentication
                protectAuthenticatedPages();
                
            } else {
                // User is signed out
                authButtons.style.display = 'flex';
                userMenu.style.display = 'none';
                
                if (userDropdown) {
                    userDropdown.classList.remove('active');
                    userAvatar?.setAttribute('aria-expanded', 'false');
                }
                
                // Redirect from protected pages
                redirectFromProtectedPages();
            }
        }

        // Setup authentication event listeners
        function setupAuthEventListeners() {
            const loginBtn = document.getElementById('loginBtn');
            const signupBtn = document.getElementById('signupBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const userAvatar = document.getElementById('userAvatar');
            const userDropdown = document.getElementById('userDropdown');

            // Login button
            if (loginBtn) {
                loginBtn.addEventListener('click', async (e) => {
                    e.preventDefault();
                    try {
                        await window.clerk.openSignIn();
                    } catch (error) {
                        console.error('Sign in error:', error);
                        showToast('Failed to open sign in. Please try again.', 'error');
                    }
                });
            }

            // Signup button
            if (signupBtn) {
                signupBtn.addEventListener('click', async (e) => {
                    e.preventDefault();
                    try {
                        await window.clerk.openSignUp();
                    } catch (error) {
                        console.error('Sign up error:', error);
                        showToast('Failed to open sign up. Please try again.', 'error');
                    }
                });
            }

            // Logout button
            if (logoutBtn) {
                logoutBtn.addEventListener('click', async (e) => {
                    e.preventDefault();
                    try {
                        await window.clerk.signOut();
                        window.location.href = 'index.html';
                    } catch (error) {
                        console.error('Sign out error:', error);
                        showToast('Failed to sign out. Please try again.', 'error');
                    }
                });
            }

            // User avatar dropdown
            if (userAvatar && userDropdown) {
                userAvatar.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const isExpanded = userDropdown.classList.toggle('active');
                    userAvatar.setAttribute('aria-expanded', isExpanded.toString());
                    
                    // Focus first item when dropdown opens
                    if (isExpanded) {
                        setTimeout(() => {
                            const firstMenuItem = userDropdown.querySelector('a[role="menuitem"]');
                            if (firstMenuItem) firstMenuItem.focus();
                        }, 100);
                    }
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', (e) => {
                    if (userDropdown && !userDropdown.contains(e.target) && !userAvatar.contains(e.target)) {
                        userDropdown.classList.remove('active');
                        userAvatar.setAttribute('aria-expanded', 'false');
                    }
                });

                // Close dropdown on Escape key
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && userDropdown.classList.contains('active')) {
                        userDropdown.classList.remove('active');
                        userAvatar.setAttribute('aria-expanded', 'false');
                        userAvatar.focus();
                    }
                });
            }

            // Handle protected links
            document.querySelectorAll('a[href="dashboard.html"], a[href="progress.html"], a[href="profile.html"]').forEach(link => {
                link.addEventListener('click', (e) => {
                    if (!window.clerk || !window.clerk.user) {
                        e.preventDefault();
                        showToast('Please sign in to access this page', 'info');
                        setTimeout(() => {
                            window.clerk?.openSignIn({
                                afterSignInUrl: link.getAttribute('href'),
                                redirectUrl: link.getAttribute('href')
                            });
                        }, 1000);
                    }
                });
            });
        }

        // Protect pages that require authentication
        function protectAuthenticatedPages() {
            const protectedPages = ['dashboard.html', 'profile.html', 'progress.html', 'settings.html'];
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            
            if (protectedPages.includes(currentPage) && (!window.clerk || !window.clerk.user)) {
                showToast('Please sign in to access this page', 'info');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1500);
            }
        }

        // Redirect from protected pages when not authenticated
        function redirectFromProtectedPages() {
            const protectedPages = ['dashboard.html', 'profile.html', 'progress.html', 'settings.html'];
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            
            if (protectedPages.includes(currentPage)) {
                showToast('Please sign in to continue', 'info');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 500);
            }
        }

        // Demo authentication for testing (remove in production)
        function initDemoAuth() {
            console.log('Initializing demo authentication');
            
            const authButtons = document.getElementById('authButtons');
            const userMenu = document.getElementById('userMenu');
            const loginBtn = document.getElementById('loginBtn');
            const signupBtn = document.getElementById('signupBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            
            // Check for demo user in localStorage
            const demoUser = localStorage.getItem('healthai_demo_user');
            
            if (demoUser) {
                // Demo user is "signed in"
                authButtons.style.display = 'none';
                userMenu.style.display = 'block';
                
                const user = JSON.parse(demoUser);
                document.getElementById('userName').textContent = user.name;
                document.getElementById('userEmail').textContent = user.email;
                document.getElementById('userAvatar').textContent = user.name.charAt(0).toUpperCase();
                
                // Setup logout
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        localStorage.removeItem('healthai_demo_user');
                        showToast('Signed out successfully', 'success');
                        setTimeout(() => location.reload(), 1000);
                    });
                }
            } else {
                // Setup demo login/signup
                if (loginBtn) {
                    loginBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const demoUser = {
                            name: 'Demo User',
                            email: 'demo@healthai.com'
                        };
                        localStorage.setItem('healthai_demo_user', JSON.stringify(demoUser));
                        showToast('Demo login successful!', 'success');
                        setTimeout(() => location.reload(), 1000);
                    });
                }
                
                if (signupBtn) {
                    signupBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const demoUser = {
                            name: 'New User',
                            email: 'newuser@healthai.com'
                        };
                        localStorage.setItem('healthai_demo_user', JSON.stringify(demoUser));
                        showToast('Demo account created!', 'success');
                        setTimeout(() => location.reload(), 1000);
                    });
                }
            }
            
            // Setup user dropdown for demo
            const userAvatar = document.getElementById('userAvatar');
            const userDropdown = document.getElementById('userDropdown');
            
            if (userAvatar && userDropdown) {
                userAvatar.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const isExpanded = userDropdown.classList.toggle('active');
                    userAvatar.setAttribute('aria-expanded', isExpanded.toString());
                });
                
                document.addEventListener('click', (e) => {
                    if (!userDropdown.contains(e.target) && !userAvatar.contains(e.target)) {
                        userDropdown.classList.remove('active');
                        userAvatar.setAttribute('aria-expanded', 'false');
                    }
                });
            }
        }

        // Initialize navigation active state
        function initNavigation() {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const navLinks = document.querySelectorAll('.nav-links a');
            
            navLinks.forEach(link => {
                const linkHref = link.getAttribute('href');
                if (linkHref === currentPage || 
                    (currentPage === '' && linkHref === 'index.html')) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }

        // Initialize smooth scrolling
        function initSmoothScrolling() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;

                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 100,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }

        // Toast notification function
        function showToast(message, type = 'info') {
            // Remove existing toasts
            document.querySelectorAll('.toast-message').forEach(toast => {
                toast.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => toast.remove(), 300);
            });

            const toast = document.createElement('div');
            toast.className = `toast-message toast-${type}`;
            toast.setAttribute('role', 'alert');
            toast.setAttribute('aria-live', 'polite');
            toast.setAttribute('aria-atomic', 'true');
            
            toast.innerHTML = `
                <span>${message}</span>
                <button onclick="this.parentElement.remove()" aria-label="Close notification">
                    &times;
                </button>
            `;

            document.body.appendChild(toast);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.style.animation = 'slideIn 0.3s ease reverse';
                    setTimeout(() => toast.remove(), 300);
                }
            }, 5000);
            
            return toast;
        }
    </script>
    <!-- In index.html, dashboard.html, profile.html, etc. -->
<script src="js/auth-system.js"></script>
</body>
</html>